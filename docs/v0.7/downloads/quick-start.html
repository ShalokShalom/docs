<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE ncx PUBLIC
    "-//NISO//DTD ncx 2005-1//EN"
    "http://www.daisy.org/z3986/2005/ncx-2005-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" />
    <title>LFE Quick Start</title>
    <meta name="DC.language" content="eng" />
    <meta name="DC.creator" content="Duncan McGreggor" />
    <meta name="DC.title" content="LFE Quick Start" />
    <base href="http://lfe.github.io/" />
  </head>
  <body>
  <a name='quick_start' />
<h1 id='quick_start'>Quick Start</h1>
<a name='1_getting_set_up' />
<h2 id='1_getting_set_up'>1 Getting Set Up</h2>
<a name='11_dependencies' />
<h3 id='11_dependencies'>1.1 Dependencies</h3>

<p>First and foremost, you will need Erlang installed. On Mac OS X, this is as easy as executing <code>brew install erlang</code> or on Ubuntu <code>apt-get install
erlang</code>. You can also install Erlang from the various pre-built packages provided on the <a href='http://www.erlang.org/download.html'>official Erlang
download page</a> or from the <a href='https://www.erlang-solutions.com/downloads/download-erlang-otp'>Erlang
Solutions page</a> (supports many more package types).</p>

<p>If you will be using <code>rebar</code> to build LFE, you&#8217;ll need to <a href='https://github.com/basho/rebar'>get that</a> too.</p>

<p>You will need to <a href='http://git-scm.com/downloads'>download git</a> or install it using your favorite package manager.</p>

<p>Next, you will need to download LFE itself:</p>

<pre><code>$ git clone git://github.com/rvirding/lfe.git</code></pre>
<a name='12_building' />
<h3 id='12_building'>1.2 Building</h3>

<p>With the dependencies installed, we&#8217;re now ready to build LFE.</p>
<a name='121_using_make' />
<h4 id='121_using_'>1.2.1 Using <code>make</code></h4>

<pre><code>$ cd ./lfe
$ erlc -o src src/lfe_scan.xrl
$ make</code></pre>

<p>Ordinarily, only the <code>make</code> command would be necessary. However, there&#8217;s currently <a href='https://github.com/rvirding/lfe/issues/14'>an issue</a> with the <code>Makefile</code> that temporarily requires that first step.</p>
<a name='122_using_rebar' />
<h4 id='122_using_'>1.2.2 Using <code>rebar</code></h4>

<p>Alternatively, one may use <code>rebar</code> to build LFE:</p>

<pre><code>$ cd ./lfe
$ rebar compile</code></pre>
<a name='13_installing' />
<h3 id='13_installing'>1.3 Installing</h3>

<p>On non-development systems, or any system where you don&#8217;t want to run LFE from a git checkout, installing system-wide is the preferred way to use LFE. If you set your <code>$ERL_LIBS</code> environment variable, LFE will install there. Here&#8217;s how one might do this on a Mac OS X system with Erlang installed by <a href='http://mxcl.github.com/homebrew/'>Homebrew</a>:</p>

<pre><code>$ export ERL_LIBS=/usr/local/lib/erlang/lib
$ make install</code></pre>

<p>You can then check that everything is where you expect:</p>

<pre><code>$ ls -1 $ERL_LIBS|grep lfe
lfe-0.7</code></pre>

<p>Now you can use LFE from anywhere:</p>
<div class='highlight'><pre><code class='erlang'><span class='sc'>$ </span><span class='n'>erl</span>
<span class='nv'>Erlang</span> <span class='nv'>R15B03</span> <span class='p'>(</span><span class='n'>erts</span><span class='o'>-</span><span class='mi'>5</span><span class='p'>.</span><span class='mi'>9</span><span class='p'>.</span><span class='mi'>3</span><span class='p'>.</span><span class='mi'>1</span><span class='p'>)</span> <span class='p'>[</span><span class='n'>source</span><span class='p'>]</span> <span class='p'>[</span><span class='mi'>64</span><span class='o'>-</span><span class='n'>bit</span><span class='p'>]</span> <span class='p'>[</span><span class='nn'>smp</span><span class='p'>:</span><span class='mi'>8</span><span class='p'>:</span><span class='mi'>8</span><span class='p'>]</span> <span class='p'>[</span><span class='n'>async</span><span class='o'>-</span><span class='nn'>threads</span><span class='p'>:</span><span class='mi'>0</span><span class='p'>]</span>
<span class='p'>[</span><span class='n'>hipe</span><span class='p'>]</span> <span class='p'>[</span><span class='n'>kernel</span><span class='o'>-</span><span class='nn'>poll</span><span class='p'>:</span><span class='n'>false</span><span class='p'>]</span> <span class='p'>[</span><span class='n'>dtrace</span><span class='p'>]</span>

<span class='nv'>Eshell</span> <span class='nv'>V5</span><span class='p'>.</span><span class='mi'>9</span><span class='p'>.</span><span class='mi'>3</span><span class='p'>.</span><span class='mi'>1</span>  <span class='p'>(</span><span class='n'>abort</span> <span class='n'>with</span> <span class='err'>^</span><span class='nv'>G</span><span class='p'>)</span>
<span class='mi'>1</span><span class='o'>&gt;</span> <span class='nn'>lfe_shell</span><span class='p'>:</span><span class='nf'>start</span><span class='p'>().</span>
<span class='nv'>LFE</span> <span class='nv'>Shell</span> <span class='nv'>V5</span><span class='p'>.</span><span class='mi'>9</span><span class='p'>.</span><span class='mi'>3</span><span class='p'>.</span><span class='mi'>1</span> <span class='p'>(</span><span class='n'>abort</span> <span class='n'>with</span> <span class='err'>^</span><span class='nv'>G</span><span class='p'>)</span>
<span class='o'>&lt;</span><span class='mi'>0</span><span class='p'>.</span><span class='mi'>33</span><span class='p'>.</span><span class='mi'>0</span><span class='o'>&gt;</span>
<span class='o'>&gt;</span>
</code></pre></div><a name='2_executing_code' />
<h2 id='2_executing_code'>2 Executing Code</h2>

<p>Once you&#8217;ve got LFE built, you want to play with it, right? Let&#8217;s take a look at the REPL (interactive shell) first.</p>
<a name='21_the_repl' />
<h3 id='21_the_repl'>2.1 The REPL</h3>

<p>To start the REPL, simply run the <code>lfe</code> script and tell <code>erl</code> (which is being run in the script) which additional code paths it should look for (in this case, the compiled LFE code):</p>

<pre><code>$ ./bin/lfe -pa ./ebin</code></pre>

<p>This assumes that you are still in the <code>lfe</code> directory where you build LFE. Running that command will dump you into the LFE REPL, looking something like this:</p>

<pre><code>Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:8:8] [async-threads:0] ...

LFE Shell V5.9.3.1 (abort with ^G)
&gt;</code></pre>

<p>Note that you can also start the the LFE shell manually from an existing Erlang shell (as we did earlier in this guide) or you can pass parameters to <code>erl</code> to start it up:</p>

<pre><code>$ erl -pa ebin -s lfe_boot -noshell -noinput</code></pre>

<p>Now try doing some basic operations:</p>
<div class='highlight'><pre><code class='cl'><span class='nb'>&gt;</span> <span class='p'>(</span><span class='nb'>+</span> <span class='mi'>1</span> <span class='mi'>2</span> <span class='mi'>3</span><span class='p'>)</span>
<span class='mi'>6</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='nb'>cons</span> <span class='mi'>1</span> <span class='mi'>2</span><span class='p'>)</span>
<span class='p'>(</span><span class='mi'>1</span> <span class='o'>.</span> <span class='mi'>2</span><span class='p'>)</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='nb'>cons</span> <span class='p'>(</span><span class='nb'>list</span> <span class='mi'>1</span> <span class='mi'>2</span><span class='p'>)</span> <span class='p'>(</span><span class='nb'>list</span> <span class='mi'>3</span> <span class='mi'>4</span><span class='p'>))</span>
<span class='p'>((</span><span class='mi'>1</span> <span class='mi'>2</span><span class='p'>)</span> <span class='mi'>3</span> <span class='mi'>4</span><span class='p'>)</span>
<span class='nb'>&gt;</span>
</code></pre></div>
<p>Next, let&#8217;s operate on some variables:</p>
<div class='highlight'><pre><code class='cl'><span class='nb'>&gt;</span> <span class='p'>(</span><span class='k'>let</span> <span class='p'>((</span><span class='nv'>x</span> <span class='mi'>123456789</span><span class='p'>))</span> <span class='nv'>x</span><span class='p'>)</span>
<span class='mi'>123456789</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='k'>let</span> <span class='p'>((</span><span class='nv'>x</span> <span class='mi'>123456789</span><span class='p'>))</span> <span class='p'>(</span><span class='nb'>*</span> <span class='nv'>x</span> <span class='nv'>x</span><span class='p'>))</span>
<span class='mi'>15241578750190521</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='k'>let</span> <span class='p'>((</span><span class='nv'>x</span> <span class='mi'>123456789</span><span class='p'>))</span> <span class='p'>(</span><span class='nb'>*</span> <span class='nv'>x</span> <span class='nv'>x</span> <span class='nv'>x</span> <span class='nv'>x</span><span class='p'>))</span>
<span class='mi'>232305722798259244150093798251441</span>
<span class='nb'>&gt;</span>
</code></pre></div>
<p>Looking good!</p>
<a name='22_running_scripts' />
<h3 id='22_running_scripts'>2.2 Running Scripts</h3>

<p>Okay, so now that you can run things in the REPL, you want to run them as a script, yes? Here&#8217;s how.</p>

<p>Let&#8217;s create a temporary subdirectory to play in without fear of messing up our LFE directory:</p>

<pre><code>$ mkdir tmp
$ cd tmp</code></pre>

<p>Then, in that directory, let&#8217;s create the following file and save it as <code>hello.lfe</code>:</p>
<div class='highlight'><pre><code class='cl'><span class='p'>(</span><span class='nv'>defmodule</span> <span class='nv'>hello</span>
  <span class='p'>(</span><span class='nb'>export</span> <span class='p'>(</span><span class='nv'>start</span> <span class='mi'>0</span><span class='p'>)))</span>

<span class='p'>(</span><span class='nb'>defun</span> <span class='nv'>start</span> <span class='p'>()</span>
  <span class='p'>(</span><span class='err'>:</span> <span class='nv'>io</span> <span class='nb'>format</span> <span class='o'>&#39;</span><span class='s'>&quot;Lfe says &#39;Hello, World!&#39;~n&quot;</span><span class='p'>))</span>
</code></pre></div>
<p>To compile that script and then run it, we can do this:</p>

<pre><code>$ ../bin/lfec hello.lfe
$ ../bin/lfe -s hello start -s erlang halt</code></pre>

<p>Or, if we want to use Erlang directly, we could do this:</p>

<pre><code>$ erl -pa ../ebin -s lfe_comp file hello -s erlang halt
$ erl -pa ../ebin -s hello start -s erlang halt</code></pre>

<p>Or, we could compile it and run it in the same command:</p>

<pre><code>$ erl -pa ../ebin -s lfe_comp file hello -s hello start -s erlang halt</code></pre>

<p>Note that this is the command line equivalent of the following:</p>

<pre><code>$ erl -pa ../ebin
1&gt; lfe_comp:file(hello).
{ok,hello}
2&gt; hello:start().
Lfe says &#39;Hello, World!&#39;
ok
3&gt;</code></pre>
<a name='23_running_scripts_from_the_repl' />
<h3 id='23_running_scripts_from_the_repl'>2.3 Running Scripts from the REPL</h3>

<p>You can also use your new <code>hello.lfe</code> script in the REPL itself. There are two ways you can do this, using <code>slurp</code> or compiling the file. If you use <code>slurp</code>, all the functions are pulled into the shell namespace, and you won&#8217;t have to reference the module name. Again, assuming that you are in <code>lfe/tmp</code>:</p>
<div class='highlight'><pre><code class='cl'><span class='nv'>$</span> <span class='o'>..</span><span class='nv'>/bin/lfe</span> <span class='nv'>-pa</span> <span class='o'>..</span><span class='nv'>/ebin</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='nv'>slurp</span> <span class='o'>&#39;</span><span class='s'>&quot;hello.lfe&quot;</span><span class='p'>)</span>
<span class='o'>#(</span><span class='nv'>ok</span> <span class='nv'>hello</span><span class='p'>)</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='nv'>start</span><span class='p'>)</span>
<span class='nv'>Lfe</span> <span class='nv'>says</span> <span class='ss'>&#39;Hello,</span> <span class='nv'>World!</span><span class='o'>&#39;</span>
<span class='nv'>ok</span>
<span class='nb'>&gt;</span>
</code></pre></div>
<p>If you choose to compile your module instead, you will use it like so:</p>
<div class='highlight'><pre><code class='cl'><span class='nv'>$</span> <span class='o'>..</span><span class='nv'>/bin/lfe</span> <span class='nv'>-pa</span> <span class='o'>..</span><span class='nv'>/ebin</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='nv'>c</span> <span class='o'>&#39;</span><span class='s'>&quot;hello&quot;</span><span class='p'>)</span>
<span class='o'>#(</span><span class='nv'>module</span> <span class='nv'>hello</span><span class='p'>)</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='err'>:</span> <span class='nv'>hello</span> <span class='nv'>start</span><span class='p'>)</span>
<span class='nv'>Lfe</span> <span class='nv'>says</span> <span class='ss'>&#39;Hello,</span> <span class='nv'>World!</span><span class='o'>&#39;</span>
<span class='nv'>ok</span>
<span class='nb'>&gt;</span>
</code></pre></div>
<p>Note that in the second example, you need to reference the module.</p>

<p>For more information on the LFE shell, be sure to see the &#8220;REPL&#8221; section of the User Guide Introduction.</p>
<a name='3_using_libraries' />
<h2 id='3_using_libraries'>3 Using Libraries</h2>
<a name='31_otp_modules' />
<h3 id='31_otp_modules'>3.1 OTP Modules</h3>

<p>Taking advantage of the <a href='http://erldocs.com/R15B/index.html?i=734#stdlib'>Erlang stdlib</a> is straightforward. All you need to do is prepend the call with a <code>:</code> and adjust to use the LFE syntax vs. the Erlang syntax.</p>

<p>In fact, we&#8217;ve already seen an example of this in Section 2 when we called <code>(: io format ...)</code> as part of a &#8220;Hello World.&#8221;</p>

<p>Here&#8217;s an example <code>base64</code> usage from the Erlang <code>stdlib</code>:</p>
<div class='highlight'><pre><code class='cl'><span class='nb'>&gt;</span> <span class='p'>(</span><span class='err'>:</span> <span class='nv'>base64</span> <span class='nv'>encode_to_string</span> <span class='o'>&#39;</span><span class='s'>&quot;Space is big. Really big.&quot;</span><span class='p'>)</span>
<span class='s'>&quot;U3BhY2UgaXMgYmlnLiBSZWFsbHkgYmlnLg==&quot;</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='err'>:</span> <span class='nv'>base64</span> <span class='nv'>decode_to_string</span> <span class='o'>&#39;</span><span class='s'>&quot;QW5kIHNvIHRoZSBVbml2ZXJzZSBlbmRlZC4=&quot;</span><span class='p'>)</span>
<span class='s'>&quot;And so the Universe ended.&quot;</span>
</code></pre></div><a name='32_processes_in_lfe' />
<h3 id='32_processes_in_lfe'>3.2 Processes in LFE</h3>

<p>One of the first things that people want to do with LFE is examine the message passing syntax so that they can compare it with vanilla Erlang. Here&#8217;s a small example of what this looks like in LFE:</p>
<div class='highlight'><pre><code class='cl'><span class='p'>(</span><span class='nb'>defun</span> <span class='nv'>print-result</span> <span class='p'>()</span>
  <span class='p'>(</span><span class='nv'>receive</span>
    <span class='p'>(</span><span class='nv'>msg</span>
      <span class='p'>(</span><span class='err'>:</span> <span class='nv'>io</span> <span class='nb'>format</span> <span class='o'>&#39;</span><span class='s'>&quot;Received message: &#39;~s&#39;~n&quot;</span> <span class='p'>(</span><span class='nb'>list</span> <span class='nv'>msg</span><span class='p'>))</span>
      <span class='p'>(</span><span class='nv'>print-result</span><span class='p'>))))</span>
</code></pre></div>
<p>If that was saved in a module called <code>messenger</code>, then one could utilize it thusly:</p>
<div class='highlight'><pre><code class='cl'><span class='nb'>&gt;</span> <span class='p'>(</span><span class='nb'>set</span> <span class='nv'>pid</span> <span class='p'>(</span><span class='nv'>spawn</span> <span class='ss'>&#39;messenger</span> <span class='ss'>&#39;print-result</span> <span class='p'>()))</span>
<span class='nv'>&lt;0.34.0&gt;</span>
<span class='nb'>&gt;</span> <span class='p'>(</span><span class='nv'>!</span> <span class='nv'>pid</span> <span class='o'>&#39;</span><span class='s'>&quot;Ford is missing.&quot;</span><span class='p'>)</span>
<span class='s'>&quot;Ford is missing.&quot;</span>
<span class='nv'>Received</span> <span class='nv'>message:</span> <span class='ss'>&#39;Ford</span> <span class='nv'>is</span> <span class='nv'>missing.</span><span class='o'>&#39;</span>
</code></pre></div>
<p>For more information on working with processes in LFE, be sure to view the <a href='/tutorials/processes/1.html'>tutorial</a>.</p>

<p>Related to this, you can find details and discussion around OTP and creating your own servers in the <a href='/tutorials/otp-servers/1.html'>OTP Servers tutorial</a>.</p>
<a name='33_third-party_libraries' />
<h3 id='33_thirdparty_libraries'>3.3 Third-Party Libraries</h3>

<p>Finally, accessing code that is written in third-party libraries is exactly the same. Simply use the modules they have provided. If you started the LFE REPL pointing to your third-party libraries with a <code>-pa</code> (path) option, then all you have to do is this:</p>
<div class='highlight'><pre><code class='cl'><span class='nb'>&gt;</span> <span class='p'>(</span><span class='err'>:</span> <span class='nv'>your-module</span> <span class='nv'>some-function</span> <span class='o'>&#39;</span><span class='s'>&quot;some parameter&quot;</span><span class='p'>)</span>
</code></pre></div>
<p>That&#8217;s it!</p>
<a name='4_next_steps' />
<h2 id='4_next_steps'>4 Next Steps</h2>

<p>This has been a quick overview of what LFE has to offer, so you might enjoy reading the <a href='/user-guide/intro/1.html'>User Guide</a> next. You can see all our docs at a glance by visiting the <a href='/docs.html'>Docs</a> page.</p>

<p>If at any time you would like to provide feedback about the documentation on this site, feel free to <a href='https://github.com/lfe/lfe.github.io/issues'>create an issue</a>. Be sure to give a full description so that we can best help you!</p>
  </body>
</html>